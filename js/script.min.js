var orderLink,closeMessageForm,closeMapForm,UserName,UserEmail,MessageContent,TimeToClose,messageLink=document.querySelector(".message"),mapLink=document.querySelector(".map"),orderLinksList=document.querySelectorAll(".item-buy"),messageForm=document.querySelector(".modal-message"),mapForm=document.querySelector(".modal-map"),orderForm=document.querySelector(".modal-order"),closeOrderForm=orderForm.querySelector(".modal-button-close"),closeOrderFormContinue=orderForm.querySelector(".continue"),isStorageSupport=!0,storageUserName="",storageUserEmail="",storageMessageContent="";try{storageUserName=localStorage.getItem("UserName"),storageUserEmail=localStorage.getItem("UserEmail"),storageMessageContent=localStorage.getItem("MessageContent")}catch(e){isStorageSupport=!1}messageForm&&(closeMessageForm=messageForm.querySelector(".modal-button-close"),UserName=messageForm.querySelector("[id=name]"),UserEmail=messageForm.querySelector("[id=email]"),MessageContent=messageForm.querySelector("[id=content]")),messageLink&&messageLink.addEventListener("click",function(e){e.preventDefault(),messageForm.classList.add("modal-show"),UserName.focus()}),closeMessageForm&&closeMessageForm.addEventListener("click",function(e){e.preventDefault(),messageForm.classList.remove("modal-show"),messageForm.classList.remove("modal-error")}),messageForm&&messageForm.addEventListener("submit",function(e){UserName.value&&UserEmail.value&&""!=MessageContent.value?isStorageSupport&&(localStorage.setItem("UserName",UserName.value),localStorage.setItem("UserEmail",UserEmail.value)):(e.preventDefault(),console.log("Заполните ваше имя, обратный электронный адрес и текст письма"),messageForm.classList.remove("modal-error"),messageForm.offsetWidth=messageForm.offsetWidth,messageForm.classList.add("modal-error"),UserName.value?UserEmail.value?""==MessageContent.value&&MessageContent.focus():UserEmail.focus():UserName.focus())}),mapForm&&(closeMapForm=mapForm.querySelector(".modal-button-close")),mapLink&&mapLink.addEventListener("click",function(e){e.preventDefault(),mapForm.classList.add("modal-show")}),closeMapForm&&closeMapForm.addEventListener("click",function(e){e.preventDefault(),mapForm.classList.remove("modal-show")});for(var i=0;i<orderLinksList.length;i++)(orderLink=orderLinksList[i]).addEventListener("click",function(e){e.preventDefault(),orderForm.classList.add("modal-show"),setTimeout(function(){orderForm.classList.remove("modal-show")},TimeToClose=5e3)});closeOrderForm.addEventListener("click",function(e){e.preventDefault(),orderForm.classList.remove("modal-show")}),closeOrderFormContinue.addEventListener("click",function(e){e.preventDefault(),orderForm.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),messageForm&&messageForm.classList.contains("modal-show")&&(messageForm.classList.remove("modal-show"),messageForm.classList.remove("modal-error")),mapForm&&mapForm.classList.contains("modal-show")&&mapForm.classList.remove("modal-show"),orderForm&&orderForm.classList.contains("modal-show")&&orderForm.classList.remove("modal-show"))});